<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Zenith Chat IA</title>
<style>
  body {
    font-family: Arial, sans-serif;
    background: linear-gradient(135deg, #1f1c2c, #928dab);
    display: flex;
    justify-content: center;
    align-items: center;
    height: 100vh;
    margin: 0;
    color: #fff;
  }

  #chat-container {
    width: 90%;
    max-width: 500px;
    display: flex;
    flex-direction: column;
    background-color: rgba(0,0,0,0.7);
    border-radius: 15px;
    padding: 15px;
    box-shadow: 0 8px 16px rgba(0,0,0,0.5);
  }

  #chat-box {
    height: 400px;
    overflow-y: auto;
    padding: 10px;
    display: flex;
    flex-direction: column;
    gap: 10px;
    border-radius: 10px;
    background-color: rgba(255,255,255,0.05);
    margin-bottom: 10px;
  }

  .message {
    padding: 10px 15px;
    border-radius: 20px;
    max-width: 80%;
    opacity: 0;
    transform: translateY(10px);
    animation: fadeInUp 0.3s forwards;
  }

  .user {
    background-color: #0a84ff;
    align-self: flex-end;
    text-align: right;
  }

  .ai {
    background-color: #2e2e2e;
    align-self: flex-start;
    text-align: left;
  }

  @keyframes fadeInUp {
    to { opacity: 1; transform: translateY(0); }
  }

  #input-container {
    display: flex;
    gap: 5px;
  }

  #userMessage {
    flex: 1;
    padding: 10px;
    border-radius: 10px;
    border: none;
    outline: none;
    font-size: 16px;
  }

  button {
    padding: 10px 15px;
    border-radius: 10px;
    border: none;
    background-color: #0a84ff;
    color: #fff;
    cursor: pointer;
    font-weight: bold;
  }

  button:hover {
    background-color: #0066cc;
  }

  /* Scrollbar */
  #chat-box::-webkit-scrollbar {
    width: 8px;
  }
  #chat-box::-webkit-scrollbar-thumb {
    background-color: rgba(255,255,255,0.3);
    border-radius: 4px;
  }

  @media (max-width: 600px) {
    #chat-container { width: 95%; }
    #chat-box { height: 300px; }
  }
</style>
</head>
<body>

<div id="chat-container">
  <div id="chat-box"></div>
  <div id="input-container">
    <input type="text" id="userMessage" placeholder="Escribe un mensaje..." onkeydown="if(event.key==='Enter'){sendMessage();}">
    <button onclick="sendMessage()">Enviar</button>
  </div>
</div>

<script>
async function sendMessage() {
  const input = document.getElementById('userMessage');
  const chatBox = document.getElementById('chat-box');
  const msg = input.value.trim();
  if (!msg) return;

  // Mostrar mensaje del usuario
  const userMsgDiv = document.createElement('div');
  userMsgDiv.className = 'message user';
  userMsgDiv.textContent = msg;
  chatBox.appendChild(userMsgDiv);

  input.value = '';
  chatBox.scrollTop = chatBox.scrollHeight;

  // Enviar mensaje al backend
  try {
    const response = await fetch('https://zenith-backend-swtw.onrender.com/', { // <- reemplaza con tu URL Render
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({ message: msg })
    });

    const data = await response.json();

    // Mostrar respuesta de IA
    const aiMsgDiv = document.createElement('div');
    aiMsgDiv.className = 'message ai';
    aiMsgDiv.textContent = data.reply;
    chatBox.appendChild(aiMsgDiv);

    chatBox.scrollTop = chatBox.scrollHeight;

  } catch (error) {
    console.error('Error con la IA:', error);
    const errorDiv = document.createElement('div');
    errorDiv.className = 'message ai';
    errorDiv.textContent = 'Error: no se pudo conectar con el backend.';
    chatBox.appendChild(errorDiv);
    chatBox.scrollTop = chatBox.scrollHeight;
  }
}
</script>

</body>
</html>
